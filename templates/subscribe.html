{% extends 'base.html' %}
{% load i18n %}

{% block title %}{% trans "Subscribe and Renew" %}{% endblock %}
{% block content %}
<div class="grid grid-cols-12 gap-8 px-4 md:px-8">
  <!-- Left side: Main subscription content from database -->
  <div class="col-span-12 md:col-span-8">
    <h1 class="text-[26px] font-bold mb-6">{% trans "Subscribe and Renew" %}</h1>
    <div class="mb-10">
      {% if main_content %}
        <div
          x-data="{
            items: [
              {% for item in main_content %}
              {
                title: '{{ item.title|escapejs }}',
                content: `{{ item.content|safe|escapejs }}`,
              }{% if not forloop.last %},{% endif %}
              {% endfor %}
            ],
            default_open: 0,
            widthClass: 'w-full'
          }"
        >
          {% include "components/accordion_card.html" %}
        </div>
      {% else %}
        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
          <p class="text-yellow-800">
            <strong>{% trans "No main subscription content available." %}</strong>
            {% trans "Please add main subscription content through the admin panel." %}
          </p>
        </div>
      {% endif %}
    </div>
  </div>

  <!-- Right side: Sidebar content from database -->
  <aside class="col-span-12 md:col-span-4 space-y-6">
    {% include 'components/sidebar_mailing_list.html' %}

    {% if sidebar_content %}
      <div
        x-data="{
          items: [
            {% for item in sidebar_content %}
            {
              title: '{{ item.title|escapejs }}',
              content: `{{ item.content|safe|escapejs }}`,
            }{% if not forloop.last %},{% endif %}
            {% endfor %}
          ],
          default_open: -1,
          widthClass: 'w-full'
        }"
      >
        {% include "components/accordion_card.html" %}
      </div>
    {% else %}
      <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
        <p class="text-blue-800">
          <strong>{% trans "No sidebar content available." %}</strong>
          {% trans "Please add sidebar subscription content through the admin panel." %}
        </p>
      </div>
    {% endif %}
  </aside>
</div>
{% endblock %}